<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard User - MyShop</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>

    <!-- Navbar Atas (Khusus Dashboard) -->
    <header class="dashboard-header">
        <div class="header-left">
            <div class="hamburger-menu" onclick="toggleSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <h1 class="page-title">Dashboard</h1>
        </div>
        <div class="header-right">
            <div class="search-box">
                <input type="text" placeholder="Search...">
            </div>
            <div class="admin-profile">
                <div class="avatar">AD</div>
                <span class="role-badge">Admin</span>
            </div>
        </div>
    </header>

    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <div class="dashboard-layout">
        
        <!-- SIDEBAR (Menu Kiri) -->
        <aside class="sidebar">
            <div class="sidebar-header-mobile">
                <h3>Menu</h3>
                <button class="close-btn" onclick="toggleSidebar()">&times;</button>
            </div>
            <nav>
                <ul>
                    <li>
                        <a href="#" class="active">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="products.html">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                            Products
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                            Orders
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>
                            Payments
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                            Customers
                        </a>
                    </li>
                    <li>
                        <a href="settings.html">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                            Settings
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- MAIN CONTENT (Isi Kanan) -->
        <main class="dashboard-content">
            
            <!-- Kartu Statistik -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <h3>Total Sales</h3>
                        <span class="trend up">↑ 12%</span>
                    </div>
                    <p class="number" id="totalSales">Rp 0</p>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <h3>Orders</h3>
                        <span class="trend up">↑ 5%</span>
                    </div>
                    <p class="number" id="totalOrders">0</p>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <h3>Revenue</h3>
                        <span class="trend down">↓ 2%</span>
                    </div>
                    <p class="number" id="totalRevenue">Rp 0</p>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <h3>Pending Payments</h3>
                        <span class="icon-warning">!</span>
                    </div>
                    <p class="number" id="pendingPayments">0</p>
                </div>
            </div>

            <!-- Chart Section -->
            <div class="chart-section">
                <h2>Revenue Overview</h2>
                <div class="chart-container">
                    <!-- Simple CSS Bar Chart Representation -->
                    <div class="bar" style="height: 40%;"></div>
                    <div class="bar" style="height: 70%;"></div>
                    <div class="bar" style="height: 50%;"></div>
                    <div class="bar" style="height: 90%;"></div>
                    <div class="bar" style="height: 60%;"></div>
                    <div class="bar" style="height: 80%;"></div>
                    <div class="bar" style="height: 45%;"></div>
                    <div class="bar" style="height: 75%;"></div>
                </div>
            </div>

            <!-- Tabel Pesanan Terakhir -->
            <section class="recent-orders">
                <h2>Recent Orders</h2>
                <table>
                    <thead>
                        <tr>
                            <th>ID Order</th>
                            <th>Customer</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="recentOrdersBody">
                        <!-- Data loaded via JS -->
                    </tbody>
                </table>
            </section>
        </main>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            loadDashboardData();
        });

        function loadDashboardData() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            
            // Calculate Stats
            const totalSalesValue = orders.reduce((sum, order) => sum + (order.status === 'paid' ? order.amount : 0), 0);
            const totalOrdersValue = orders.length;
            const pendingPaymentsValue = orders.filter(o => o.status === 'pending').length;

            // Update DOM
            document.getElementById('totalSales').textContent = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(totalSalesValue);
            document.getElementById('totalRevenue').textContent = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(totalSalesValue); // Assuming Revenue = Sales for now
            document.getElementById('totalOrders').textContent = totalOrdersValue;
            document.getElementById('pendingPayments').textContent = pendingPaymentsValue;

            // Render Table
            const tableBody = document.getElementById('recentOrdersBody');
            tableBody.innerHTML = '';

            if (orders.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" style="text-align:center; padding: 1rem;">No orders found</td></tr>';
                return;
            }

            // Show last 5 orders
            orders.slice(0, 5).forEach(order => {
                const row = document.createElement('tr');
                const statusClass = order.status === 'paid' ? 'success' : (order.status === 'pending' ? 'pending' : 'warning');
                const formattedAmount = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(order.amount);
                
                row.innerHTML = `
                    <td>#${order.id}</td>
                    <td>${order.customer}</td>
                    <td>${formattedAmount}</td>
                    <td><span class="status ${statusClass}" style="text-transform: capitalize;">${order.status}</span></td>
                    <td>${order.date}</td>
                    <td><button style="background:none; border:none; color:#3B82F6; cursor:pointer;">Detail</button></td>
                `;
                tableBody.appendChild(row);
            });
        }

        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }
    </script>
</body>
</html>
